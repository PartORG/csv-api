# csv-api
This is a small api to work with .csv file data.

# Information
This API uses .csv files stored in local_data/ folder to load them ones when the API starts into a local sqlite database.

# Project folder structure
Project consists of several main folders and a main.py file to run the API.
The folder structure looks like this:

```
csv-api/
|-- api/ 
|    |-- v1/
|    |    |-- route_information.py
|    |    |-- route_production.py
|    |-- collect_routes.py
|-- db/
|    |-- cruds/
|    |    |-- crud_information.py
|    |    |-- crud_production.py
|    |-- models/
|    |    |-- information_model.py
|    |    |-- production_model.py
|    |-- local_session.py
|-- local_data/
|    |-- csv_files/
|    |    |-- ... set of files here
|    |-- local_database.db
|-- schemas/
|    |-- information_schemas.py
|    |-- production_schemas.py
|-- config.py
|-- main.py
|-- requirements.txt
|-- test_api.py
|-- README.MD
```

test_api.py file has a minimal set of unittests for api.
requirements.txt has a list of modules needed to be installed for project to work.

# Prepare running environment locally
To prepare an environment to run this api you need to prepare a virtual environment with python > 3.7
and use requirements.txt file to install all dependencies.
Execute next commands in a project folder:
```commandline
>> python3 -m venv venv
>> source venv/bin/activate
>> pip install -r requirements.txt
```

# Run API in local environment
After setting up your local venv, simply execute main.py file with Python in Terminal.
After you will see output like this:
```commandline
11-04 09:10 db.local_session DEBUG    Parsing CSV with Pandas --- Bemmel.csv
11-04 09:10 db.local_session DEBUG    Successfully parsed Underdog CSV.
11-04 09:10 db.local_session INFO     Database successfully created for - Bemmel.
INFO:     Will watch for changes in these directories: ['/home/ievgen/csv-api']
INFO:     Uvicorn running on http://localhost:8888 (Press CTRL+C to quit)
INFO:     Started reloader process [63531] using StatReload
INFO:     Started server process [63537]
INFO:     Waiting for application startup.
INFO:     Application startup complete.

```

Default values for Host and Port can be found in config.py file.
There you can set your HOST and PORT values as any other needed parameters.

Follow the indicated link (address) to start using this API.

To see a beautiful documentation generated by FastAPI add /docs to the link provided in terminal:
```commandline
http://localhost:8888/docs
```

# Stop local API server
To stop the API you need to press CTRL+C in the terminal.
You will see messages that show that API stopped:
```commandline
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [63818]
INFO:     Stopping reloader process [63813]

```

# POSSIBLE WAYS WHERE TO DEPLOY THIS API
1) On a dedicated server:
    At this point you will need to prepare an environment on dedicated server and run API as instructed.
    Or another way is to prepare a docker container with API and also use it on server.
2) On some Cloud Service as AWS, AZURE:
    Here it is possible to use a Docker container to deploy API to AWS.
    Also possible to use this Docker in a serverless solutions of Cloud Services and configure corresponding databases.

# Further notes
Here should go any additional notes.